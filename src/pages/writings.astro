---
import BaseLayout from '../layouts/BaseLayout.astro';
import BlogPost from '../components/BlogPost.astro';

const allBlogPosts = Object.values(import.meta.glob('./posts/*.md', { eager: true }));
const allWritingPosts = Object.values(import.meta.glob('./writing/*.md', { eager: true }));

const allPosts = [...allBlogPosts, ...allWritingPosts];


// Separate posts into categories
// Define a type for posts with frontmatter containing pubDate
interface PostWithPubDate { frontmatter: { pubDate: string } }
interface PostWithTags { frontmatter: { tags?: string[] } }

const blogPosts = (allBlogPosts as PostWithPubDate[]).sort((a, b) => new Date(b.frontmatter.pubDate).valueOf() - new Date(a.frontmatter.pubDate).valueOf());
const skyboundSaga = (allWritingPosts as PostWithTags[]).filter((post) => post.frontmatter.tags && post.frontmatter.tags.includes("Skybound Saga"));
const otherWriting = (allWritingPosts as (PostWithPubDate & PostWithTags)[]).filter((post) =>
  !post.frontmatter.tags?.includes("Skybound Saga")
).sort((a, b) => new Date(b.frontmatter.pubDate).valueOf() - new Date(a.frontmatter.pubDate).valueOf());

const pageTitle = "Writings";
---

<BaseLayout pageTitle={pageTitle}>

  <h2>Blog</h2>
  <ul>
    {blogPosts.map((post: any) => <BlogPost url={post.url} title={post.frontmatter.title}/>)}
  </ul>

  <h2>Skybound Saga</h2>
  <p>
  Skybound Saga is a science-fantasy speculative fiction project that took flight in 2016. While it is primarily a work of literature, it is also supported by pieces of visual art to present the depth of its world. The project centers around the Drarthers: a race of half-human, half-dragon hybrids capable of magic. Coursing through their veins, their magic is powered by Metaquarks; mysterious sub-atomic fundamental particles, able to manipulate matter and the fundamental forces of the universe.
  <br><br>
  Like many speculative fiction projects, much time and care was spent crafting histories, cultures, factions, states, languages, and many facets of civilization to fully immerse oneself into the Saga. It also mixes dragon myths from all over the world, combining Asian dragons, western dragons, and other dragon-like creatures from the Americas and Africa. It even introduces ‘alien dragons’ into the mix, further combining scientific and fantastic elements.
  <br><br>
  The Drarthers first emerged at the same time as the Homo Sapiens. The ancient dragons of the time, also possessing Metaquarks, attacked the early humans and gave them draconic DNA. Such incidents slowly turned them into the modern Drarther: a humanoid with either a pair of draconic wings if they're descended from a western dragon lineage, or a set of fins along their spine, if descended from eastern dragons. Their blood turns blue, most likely caused by the draconic DNA. They also gain scales scattered on their body, nestled within human-like skin. They lose bone density and integrity of their lower limbs, to shed weight for flight.
  <br><br>
  The Saga's setting is split into two main locations, Earth and Klerga. The former is set slightly into the future dealing with the fallout of WW3 (thankfully not fought with nuclear weapons), and the latter, a refuge for the Drarthers created by four pioneering men and women of their time, in an act that historians describe as “magical astroengineering.” Klerga separated Humanity and the Drarthers for good, ending a cross-species conflict hundreds of thousands of years in the making. Several, heavily guarded wormholes, created by magic and powered by Metaquarks, serves as the bridge between the two worlds.
  <br><br>
  Currently, the main series of books in the Saga is set in the near future of the Information Era, but all stories and lore within the project span hundreds of years, even thousands, giving it a rich and detailed history.
  </p>
  <ul>
    {skyboundSaga.map((post: any) => <BlogPost url={post.url} title={post.frontmatter.title}/>)}
  </ul>

  <h2>Other Writing</h2>
  <ul>
    {otherWriting.map((post: any) => <BlogPost url={post.url} title={post.frontmatter.title}/>)}
  </ul>
</BaseLayout>